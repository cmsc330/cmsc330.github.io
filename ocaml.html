<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;Functional Programming with OCaml</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="extra.css" title="default"/><link rel="stylesheet" type="text/css" href="fancyverb.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">CMSC 330 Lecture Notes</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Functional Programming with OCaml</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Regular_Expressions.html" class="tocviewlink" data-pltdoc="x">Regular Expressions</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Finite_State_Automata.html" class="tocviewlink" data-pltdoc="x">Finite State Automata</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Functional Programming with OCaml</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._.Books%29" class="tocviewlink" data-pltdoc="x">Books</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._.Installing_.O.Caml%29" class="tocviewlink" data-pltdoc="x">Installing OCaml</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part.__.O.P.A.M__.O.Caml_.Package_.Manager%29" class="tocviewlink" data-pltdoc="x"> OPAM:<span class="mywbr"> &nbsp;</span> OCaml Package Manager</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#%28part.__.Working_with_.O.Caml%29" class="tocviewlink" data-pltdoc="x"> Working with OCaml</a></td></tr><tr><td align="right">1.5&nbsp;</td><td><a href="#%28part._.Project_.Builds_with_dune%29" class="tocviewlink" data-pltdoc="x">Project Builds with dune</a></td></tr><tr><td align="right">1.6&nbsp;</td><td><a href="#%28part.__.O.Caml_.Basics%29" class="tocviewlink" data-pltdoc="x"> OCaml Basics</a></td></tr><tr><td align="right">1.7&nbsp;</td><td><a href="#%28part._.O.Caml_toplevel__a_.R.E.P.L_for_.O.Caml%29" class="tocviewlink" data-pltdoc="x">OCaml toplevel, a REPL for OCaml</a></td></tr><tr><td align="right">1.8&nbsp;</td><td><a href="#%28part._.First_.O.Caml_.Example%29" class="tocviewlink" data-pltdoc="x">First OCaml Example</a></td></tr><tr><td align="right">1.9&nbsp;</td><td><a href="#%28part._.Expressions%29" class="tocviewlink" data-pltdoc="x">Expressions</a></td></tr><tr><td align="right">1.10&nbsp;</td><td><a href="#%28part._.Values%29" class="tocviewlink" data-pltdoc="x">Values</a></td></tr><tr><td align="right">1.11&nbsp;</td><td><a href="#%28part._.Types%29" class="tocviewlink" data-pltdoc="x">Types</a></td></tr><tr><td align="right">1.12&nbsp;</td><td><a href="#%28part._if_expression%29" class="tocviewlink" data-pltdoc="x">if expression</a></td></tr><tr><td align="right">1.13&nbsp;</td><td><a href="#%28part.__.Functions%29" class="tocviewlink" data-pltdoc="x"> Functions</a></td></tr><tr><td align="right">1.14&nbsp;</td><td><a href="#%28part._.Calling_.Functions__.Function_.Application_%29" class="tocviewlink" data-pltdoc="x">Calling Functions (Function Application)</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Books%29" class="tocsubseclink" data-pltdoc="x">Books</a></td></tr><tr><td><span class="tocsublinknumber">1.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Similar_.Courses%29" class="tocsubseclink" data-pltdoc="x">Similar Courses</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Installing_.O.Caml%29" class="tocsubseclink" data-pltdoc="x">Installing OCaml</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part.__.O.P.A.M__.O.Caml_.Package_.Manager%29" class="tocsubseclink" data-pltdoc="x"> OPAM:<span class="mywbr"> &nbsp;</span> OCaml Package Manager</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part.__.Working_with_.O.Caml%29" class="tocsubseclink" data-pltdoc="x"> Working with OCaml</a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#%28part._.Project_.Builds_with_dune%29" class="tocsubseclink" data-pltdoc="x">Project Builds with dune</a></td></tr><tr><td><span class="tocsublinknumber">1.6<tt>&nbsp;</tt></span><a href="#%28part.__.O.Caml_.Basics%29" class="tocsubseclink" data-pltdoc="x"> OCaml Basics</a></td></tr><tr><td><span class="tocsublinknumber">1.7<tt>&nbsp;</tt></span><a href="#%28part._.O.Caml_toplevel__a_.R.E.P.L_for_.O.Caml%29" class="tocsubseclink" data-pltdoc="x">OCaml toplevel, a REPL for OCaml</a></td></tr><tr><td><span class="tocsublinknumber">1.8<tt>&nbsp;</tt></span><a href="#%28part._.First_.O.Caml_.Example%29" class="tocsubseclink" data-pltdoc="x">First OCaml Example</a></td></tr><tr><td><span class="tocsublinknumber">1.9<tt>&nbsp;</tt></span><a href="#%28part._.Expressions%29" class="tocsubseclink" data-pltdoc="x">Expressions</a></td></tr><tr><td><span class="tocsublinknumber">1.10<tt>&nbsp;</tt></span><a href="#%28part._.Values%29" class="tocsubseclink" data-pltdoc="x">Values</a></td></tr><tr><td><span class="tocsublinknumber">1.11<tt>&nbsp;</tt></span><a href="#%28part._.Types%29" class="tocsubseclink" data-pltdoc="x">Types</a></td></tr><tr><td><span class="tocsublinknumber">1.12<tt>&nbsp;</tt></span><a href="#%28part._if_expression%29" class="tocsubseclink" data-pltdoc="x">if expression</a></td></tr><tr><td><span class="tocsublinknumber">1.13<tt>&nbsp;</tt></span><a href="#%28part.__.Functions%29" class="tocsubseclink" data-pltdoc="x"> Functions</a></td></tr><tr><td><span class="tocsublinknumber">1.14<tt>&nbsp;</tt></span><a href="#%28part._.Calling_.Functions__.Function_.Application_%29" class="tocsubseclink" data-pltdoc="x">Calling Functions (Function Application)</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.15</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;CMSC 330 Lecture Notes&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;CMSC 330 Lecture Notes&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Regular_Expressions.html" title="forward to &quot;2 Regular Expressions&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div><h3 class="heading">1<tt>&nbsp;</tt><a name="(part._ocaml)"></a>Functional Programming with OCaml<span class="button-group"><a href="#(part._ocaml)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p><div class="SIntrapara">OCaml is a dialect of the ML programming language family, developed in France at INRIA. OCaml is the main implementation of the programming language Caml. The features of ML include:
</div><div class="SIntrapara"><ul><li><p>First-class functions</p></li><li><ul><li><p> Functions can be data. We can send functions as  parameters to other functions and return functions as return values.</p></li></ul></li><li><p>Favor immutability (assign once)</p></li><li><p>Data types and pattern matching</p></li><li><ul><li><p>Convenient for certain kinds of data structures</p></li></ul></li><li><p>Type inference</p></li><li><ul><li><p>OCaml is statically typed, but there is no need to write types in the source language</p></li><li><p>Supports parametric polymorphism, similar to Generics in Java, templates in C++</p></li></ul></li><li><p>Exceptions</p></li><li><p>Garbage collection</p></li></ul></div><div class="SIntrapara">Modern programming languages have borrowed many ideas from functional programming, including first-class functions, anonymous functions, and garbage collection.</div></p><h4 class="heading">1.1<tt>&nbsp;</tt><a name="(part._.Books)"></a>Books<span class="button-group"><a href="#(part._.Books)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p><div class="SIntrapara">Below is a list of free online books available on OCaml.
</div><div class="SIntrapara"><ul><li><p>Developing Applications with Objective Caml <a href="https://caml.inria.fr/pub/docs/oreilly-book/ocaml-ora-book.pdf">https://caml.inria.fr/pub/docs/oreilly-book/ocaml-ora-book.pdf</a></p></li><li><p>Introduction to the Objective Caml Programming Language <a href="http://courses.cms.caltech.edu/cs134/cs134b/book.pdf">http://courses.cms.caltech.edu/cs134/cs134b/book.pdf</a></p></li><li><p>Real World OCaml 2nd Edition <a href="https://dev.realworldocaml.org/">https://dev.realworldocaml.org/</a></p></li><li><p>OCaml from the Very Beginning <a href="https://johnwhitington.net/ocamlfromtheverybeginning/mlbook.pdf">https://johnwhitington.net/ocamlfromtheverybeginning/mlbook.pdf</a></p></li><li><p>Cornell cs3110 book <a href="https://cs3110.github.io/textbook/cover.html">https://cs3110.github.io/textbook/cover.html</a> is another course which uses OCaml; it is more focused on programming and less on PL theory than this class is.</p></li><li><p><a href="ocaml.org">ocaml.org</a> is the home of OCaml for finding downloads, documentation, etc. The tutorials are also very good and there is a page of books.</p></li></ul></div></p><h5 class="heading">1.1.1<tt>&nbsp;</tt><a name="(part._.Similar_.Courses)"></a>Similar Courses<span class="button-group"><a href="#(part._.Similar_.Courses)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h5><p>If you&rsquo;re interested, I&#8217;ve listed several similar courses from other universities. For example, Cornell offers a comparable course&#8212;CS 3110&#8212;and there are also similar offerings from the University of Washington, Princeton, Harvard, and UIUC. You can check out their websites; Cornell&#8217;s, in particular, provides an online textbook along with videos and other helpful resources.</p><p>You might find it helpful to watch their lectures, go through their examples, or even try out their projects or exams. They all use OCaml, and the course structure is quite similar.</p><p>So, it&#8217;s more than just a textbook&#8212;you have access to notes, slides, exams, and other useful materials.</p><ul><li><p>CS3110 (Cornell)</p></li><li><p>CSE341 (Washington)</p></li><li><p>601.426 (Johns Hopkins)</p></li><li><p>COS326 (Princeton)</p></li><li><p>CS152 (Harvard)</p></li><li><p>CS421 (UIUC)</p></li></ul><h4 class="heading">1.2<tt>&nbsp;</tt><a name="(part._.Installing_.O.Caml)"></a>Installing OCaml<span class="button-group"><a href="#(part._.Installing_.O.Caml)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>Install the latest version of OCaml from https://ocaml.org/</p><h4 class="heading">1.3<tt>&nbsp;</tt><a name="(part.__.O.P.A.M__.O.Caml_.Package_.Manager)"></a> OPAM: OCaml Package Manager<span class="button-group"><a href="#(part.__.O.P.A.M__.O.Caml_.Package_.Manager)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p><div class="SIntrapara">Opam is the package manager for OCaml. It manages libraries and different compiler installations. For the class projects, you should install the following packages with <span style="font-weight: bold">opam</span>.
</div><div class="SIntrapara"><ul><li><p>ounit, a testing framework similar to minitest</p></li><li><p>utop, a top-level interface</p></li><li><p>dune, a build system for larger projects</p></li></ul></div></p><h4 class="heading">1.4<tt>&nbsp;</tt><a name="(part.__.Working_with_.O.Caml)"></a> Working with OCaml<span class="button-group"><a href="#(part.__.Working_with_.O.Caml)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>OCaml programs can be compiled using <span style="font-weight: bold">ocamlc</span>. It produces <span style="font-weight: bold"></span>.cmo (compiled object) and {.cmi} (compiled interface) files. You can use <span style="font-weight: bold">-o</span> to set output file name, and use <span style="font-weight: bold">-c</span> to compile only to <span style="font-weight: bold">.cmo/.cmi</span> and not to link. You can also compile with <span style="font-weight: bold">ocamlopt</span>. It produces <span style="font-weight: bold">cmx</span> files, which contain native code: faster, but not platform-independent (or as easily debugged)</p><h4 class="heading">1.5<tt>&nbsp;</tt><a name="(part._.Project_.Builds_with_dune)"></a>Project Builds with dune<span class="button-group"><a href="#(part._.Project_.Builds_with_dune)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>You use <span style="font-weight: bold">dune</span> to compile projects. It automatically finds dependencies, invokes compiler and linker. Let us create a new project with <span style="font-weight: bold">dune</span>:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> dune init project HelloWorld</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Entering</span> directory &#39;<span class="st">/Users/anwar/git/2025Fall/CMSC330/cmsc330-notes/notes/code/HelloWorld&#39;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Success:</span> initialized project component named HelloWorld</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">Leaving</span> directory &#39;<span class="st">/Users/anwar/git/2025Fall/CMSC330/cmsc330-notes/notes/code/HelloWorld&#39;</span></span></code></pre></div>
</p></blockquote></blockquote><p><div class="SIntrapara">It creates a &lsquo;HelloWorld&lsquo; project with the following files:
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> tree HelloWorld</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">HelloWorld</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ <span class="fu">_build</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>â”‚Â Â  â””â”€â”€ <span class="fu">log</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ <span class="fu">bin</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>â”‚Â Â  â”œâ”€â”€ <span class="fu">dune</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>â”‚Â Â  â””â”€â”€ <span class="fu">main.ml</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ <span class="fu">dune-project</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ <span class="fu">HelloWorld.opam</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>â”œâ”€â”€ <span class="fu">lib</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>â”‚Â Â  â””â”€â”€ <span class="fu">dune</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>â””â”€â”€ <span class="bu">test</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    â”œâ”€â”€ <span class="fu">dune</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    â””â”€â”€ <span class="fu">test_HelloWorld.ml</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>5 <span class="fu">directories,</span> 8 files</span></code></pre></div>
</p></blockquote></blockquote></div></p><p>Build the project:
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>dune build</span></code></pre></div>
</p><p>Run it:
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>dune exec bin/main.exe</span></code></pre></div>

or
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>_build/default/main.exe</span></code></pre></div>

Run the tests
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>dune runtest</span></code></pre></div>
</p><h4 class="heading">1.6<tt>&nbsp;</tt><a name="(part.__.O.Caml_.Basics)"></a> OCaml Basics<span class="button-group"><a href="#(part.__.O.Caml_.Basics)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p><div class="SIntrapara">OCaml files are written with a &ldquo;.ml&ldquo; extension. An OCaml file is similar to a Python file: when run, it evaluates the file directly. There is no special main function. An OCaml file consists of
</div><div class="SIntrapara"><ul><li><p>A series of open statements for including other modules</p></li><li><p>A series of declarations for defining datatypes, functions, and constants</p></li><li><p>A series of (though often just one) toplevel expressions to evaluate.</p></li></ul></div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">(* A small OCaml program *)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dt">print_string</span> <span class="st">&quot;Hello world!</span><span class="ch">\n</span><span class="st">&quot;</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>#   </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Hello world!</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>- : <span class="dt">unit</span> = ()</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div><div class="SIntrapara">Or
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">open</span> <span class="dt">Printf</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> message = <span class="st">&quot;Hello world&quot;</span>;;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>(printf <span class="st">&quot;%s</span><span class="ch">\n</span><span class="st">&quot;</span> message);;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>#   <span class="kw">val</span> message : <span class="dt">string</span> = <span class="st">&quot;Hello world&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Hello world</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>- : <span class="dt">unit</span> = ()</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div><div class="SIntrapara">The first line includes the built-in library for printing, which provides functions similar to <span style="font-weight: bold">fprintf</span> and <span style="font-weight: bold">printf</span>
 from <span style="font-weight: bold">stdlib</span> in <span style="font-weight: bold">C</span>. The next two lines define a constant named message, and then call the <span style="font-weight: bold">&lsquo;printf</span> function with a format string (where &lsquo;%s&lsquo; means "format as string"), and the constant message we defined on the line before.</div></p><p><div class="SIntrapara">To compile and run
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> ocamlc hello.ml -o hello</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> ./hello</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Hello</span> world!</span></code></pre></div>
</p></blockquote></blockquote></div></p><p><div class="SIntrapara">We can also compile multiple files to generate a single executable.
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><a href="code/main.ml"><span class="stt">main.ml</span></a></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main.ml</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">*</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">print_int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">Util.add</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">10</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="hspace">&nbsp;</span><span class="RktCmt">print_string</span><span class="hspace">&nbsp;</span><span class="RktCmt">"\n"</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr></table></blockquote></blockquote></div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><a href="code/util.ml"><span class="stt">util.ml</span></a></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">util.ml</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">*</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">add</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr></table></blockquote></blockquote></div></p><p>Compile and run:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> ocamlc util.ml main.ml -o main</span></code></pre></div>
</p></blockquote></blockquote><p>Or compile separately</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> ocamlc -c util.ml</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> ocamlc util.cmo main.ml</span></code></pre></div>
</p></blockquote></blockquote><p><div class="SIntrapara">It generates an executable <span style="font-weight: bold">main</span>. We can execute it by
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">shell</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode fish"><code class="sourceCode fish"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> ./main</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>30</span></code></pre></div>
</p></blockquote></blockquote></div></p><h4 class="heading">1.7<tt>&nbsp;</tt><a name="(part._.O.Caml_toplevel__a_.R.E.P.L_for_.O.Caml)"></a>OCaml toplevel, a REPL for OCaml<span class="button-group"><a href="#(part._.O.Caml_toplevel__a_.R.E.P.L_for_.O.Caml)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>We will begin exploration of OCaml in the interactive top level. A top level is also called a read-eval-print loop (REPL) and it works like a terminal shell. To run the ocaml topleve, simply run &lsquo;ocaml&lsquo;
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a> % ocaml</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a> OCaml version <span class="fl">5.2</span>.<span class="dv">0</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a> # <span class="dt">print_string</span> <span class="st">&quot;Hello world!</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;</span>;;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    Hello world!</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a> - : <span class="dt">unit</span> = ()</span></code></pre></div>

There is an alternative toplevel called <span style="font-weight: bold">utop</span>. It is more user friendly, and we will be using &lsquo;utop&lsquo; in the class. You can install <span style="font-weight: bold">utop</span> by runnung <span style="font-weight: bold">opam install utop</span>&lsquo;. Follow the instructions in the project 0 for installing opam and ocaml.</p><p><div class="SIntrapara">To load a &lsquo;.ml&lsquo; file into top level:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">#use "filename.ml"</span></p></td></tr></table></div><div class="SIntrapara">To exit the top-level, type ^D (Control&#194; D) or call the exit 0
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"># exit 0;;</span></p></td></tr></table></div></p><h4 class="heading">1.8<tt>&nbsp;</tt><a name="(part._.First_.O.Caml_.Example)"></a>First OCaml Example<span class="button-group"><a href="#(part._.First_.O.Caml_.Example)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">(* A small OCaml program (* with nested comments *) *)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> x = <span class="dv">37</span>;;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> y = x + <span class="dv">5</span>;;</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dt">print_int</span> y;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>#   <span class="kw">val</span> x : <span class="dt">int</span> = <span class="dv">37</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a># <span class="kw">val</span> y : <span class="dt">int</span> = <span class="dv">42</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">42</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>- : <span class="dt">unit</span> = ()</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote><p><div class="SIntrapara">OCaml is strictly typed. It does not implicitly cast types. For example, <span style="font-weight: bold">print_int</span> only prints <span style="font-weight: bold">int</span>s.
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">print_int</span> <span class="dv">10</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>- : <span class="dt">unit</span> = ()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div><div class="SIntrapara"><span style="font-weight: bold">( )</span> is called unit. It is similar to &lsquo;void&lsquo; in other languages. Following expressions do not type check
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">print_int</span> <span class="fl">10.5</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Line <span class="dv">1</span>, characters <span class="dv">10-14</span>:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> | <span class="dt">print_int</span> <span class="fl">10.5</span>;;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>              ^^^^</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>Error: The constant <span class="st">&quot;10.5&quot;</span> has <span class="kw">type</span> <span class="st">&quot;float&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>       but an expression was expected <span class="kw">of</span> <span class="kw">type</span> <span class="st">&quot;int&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div><div class="SIntrapara">becase <span style="font-weight: bold">print_int</span> does not take <span style="font-weight: bold">float</span> as an argument. The following code does not typecheck because &lsquo;+&lsquo; operator requires both operands are integers.
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> + <span class="fl">0.5</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Line <span class="dv">1</span>, characters <span class="dv">4-7</span>:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> | <span class="dv">1</span> + <span class="fl">0.5</span>;;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        ^^^</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>Error: The constant <span class="st">&quot;0.5&quot;</span> has <span class="kw">type</span> <span class="st">&quot;float&quot;</span> but an expression was expected <span class="kw">of</span> <span class="kw">type</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;int&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div></p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> + <span class="kw">true</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Line <span class="dv">1</span>, characters <span class="dv">4-8</span>:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> | <span class="dv">1</span> + <span class="kw">true</span>;;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        ^^^^</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>Error: The constructor <span class="st">&quot;true&quot;</span> has <span class="kw">type</span> <span class="st">&quot;bool&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>       but an expression was expected <span class="kw">of</span> <span class="kw">type</span> <span class="st">&quot;int&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote><p><div class="SIntrapara">As expected, <span style="font-weight: bold">print_int</span> does not a string as an argument.
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">print_int</span> <span class="st">&quot;This function expected an int&quot;</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Line <span class="dv">1</span>, characters <span class="dv">10-41</span>:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> | <span class="dt">print_int</span> <span class="st">&quot;This function expected an int&quot;</span>;;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>Error: This constant has <span class="kw">type</span> <span class="st">&quot;string&quot;</span> but an expression was expected <span class="kw">of</span> <span class="kw">type</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;int&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div></p><h4 class="heading">1.9<tt>&nbsp;</tt><a name="(part._.Expressions)"></a>Expressions<span class="button-group"><a href="#(part._.Expressions)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>In OCaml, expressions are the fundamental building blocks of programs, and evaluating an expression always produces a value. Unlike many imperative languages, which distinguish between statements (actions) and expressions (values), OCaml is expression-oriented&#8212;almost everything in the language is an expression that yields a result.</p><p><div class="SIntrapara">Every kind of expression has syntax and semantics. Semantics include:
 </div><div class="SIntrapara"><ul><li><p>Type checking rules (static semantics): produce a type or fail with an error message</p></li><li><p>Evaluation rules (dynamic semantics): produce a value or an exception or infinite loop. Evaluation rules are used only on expressions that type-check</p></li></ul></div></p><p>We use metavariable <span style="font-weight: bold">e</span> to designate an arbitrary expression.</p><h4 class="heading">1.10<tt>&nbsp;</tt><a name="(part._.Values)"></a>Values<span class="button-group"><a href="#(part._.Values)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>A value is an expression that is final. For example, <span style="font-weight: bold">34</span> and <span style="font-weight: bold">true</span> are values because we cannot evaluate them any further. On the contrary, <span style="font-weight: bold">34+17</span> is an expression, but not a value because we can further evaluate it. Evaluating an expression means running it until it is a value. For example &lsquo;34+17&lsquo; evaluates to 51, which is a value. We use metavariable <span style="font-weight: bold">v</span> to designate an arbitrary value</p><h4 class="heading">1.11<tt>&nbsp;</tt><a name="(part._.Types)"></a>Types<span class="button-group"><a href="#(part._.Types)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>Types classify expressions. It is the set of values an expression could evaluate to. Examples include &lsquo;int&lsquo;, &lsquo;bool&lsquo;, &lsquo;string&lsquo;, and more. We use metavariable <span style="font-weight: bold">t</span> to designate an arbitrary type. Expression <span style="font-weight: bold">e</span> has type <span style="font-weight: bold">t</span> if <span style="font-weight: bold">e</span> will (always) evaluate to a value of type <span style="font-weight: bold">t</span>. For example &lsquo;0&lsquo;, &lsquo;1&lsquo;, and &lsquo;-1&lsquo; are values of type &lsquo;int&lsquo; while &lsquo;true&lsquo; has type &lsquo;bool&lsquo;. &lsquo;34+17&lsquo; is an expression of type &lsquo;int&lsquo;, since it evaluates to &lsquo;51&lsquo;, which has type &lsquo;int&lsquo;. We usually write <span style="font-weight: bold">e : t</span> to say &lsquo;e&lsquo; has type &lsquo;t&lsquo;.  The process of determining &lsquo;e&lsquo; has type &lsquo;t&lsquo; is called &lsquo;type checking&lsquo; simply, &lsquo;typing&lsquo;.</p><h4 class="heading">1.12<tt>&nbsp;</tt><a name="(part._if_expression)"></a>if expression<span class="button-group"><a href="#(part._if_expression)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>The syntax of the if expression is
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> e1 <span class="kw">then</span> e2 <span class="kw">else</span> e3</span></code></pre></div>
</p><p>We type check the if expression using the following type checking rules:
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> e1 : <span class="dt">bool</span> <span class="kw">and</span> e2 : t <span class="kw">and</span> e3 : t <span class="kw">then</span>  <span class="kw">if</span> e1 <span class="kw">then</span> e2 <span class="kw">else</span> e3 : t</span></code></pre></div>
</p><p><div class="SIntrapara">The if expression requires that both the then and else branches return the same type.
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="dv">7</span> &gt; <span class="dv">42</span> <span class="kw">then</span> <span class="st">&quot;hello&quot;</span> <span class="kw">else</span> <span class="st">&quot;goodbye&quot;</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>- : <span class="dt">string</span> = <span class="st">&quot;goodbye&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div><div class="SIntrapara">The follwing expression does not type check because the two branches of the &lsquo;if&lsquo; expressin do not return the same type. The &lsquo;true&lsquo; branch returns &lsquo;string&lsquo;, while the &lsquo;false&lsquo; branch returns &lsquo;int&lsquo;
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="dv">7</span> &gt; <span class="dv">42</span> <span class="kw">then</span> <span class="st">&quot;hello&quot;</span> <span class="kw">else</span> <span class="dv">10</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Line <span class="dv">1</span>, characters <span class="dv">28-30</span>:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> | <span class="kw">if</span> <span class="dv">7</span> &gt; <span class="dv">42</span> <span class="kw">then</span> <span class="st">&quot;hello&quot;</span> <span class="kw">else</span> <span class="dv">10</span>;;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                                ^^</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>Error: The constant <span class="st">&quot;10&quot;</span> has <span class="kw">type</span> <span class="st">&quot;int&quot;</span> but an expression was expected <span class="kw">of</span> <span class="kw">type</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;string&quot;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div></p><p><div class="SIntrapara">Evaluating an expression returns a value. For example, evaluaing &lsquo;(if 10 &gt; 5 then 100 else 200)&lsquo; retuens &lsquo;100&lsquo;.
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">print_int</span> (<span class="kw">if</span> <span class="dv">10</span>&gt;<span class="dv">5</span> <span class="kw">then</span> <span class="dv">100</span> <span class="kw">else</span> <span class="dv">200</span>);;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dv">100</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>- : <span class="dt">unit</span> = ()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div></p><h4 class="heading">1.13<tt>&nbsp;</tt><a name="(part.__.Functions)"></a> Functions<span class="button-group"><a href="#(part.__.Functions)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>OCaml functions are like mathematical functions. They compute a result from provided arguments. We use &lsquo;let&lsquo; to define a function:</p><p>We now define the function <span style="font-weight: bold">next</span>, which accepts an integer <span style="font-weight: bold">n</span> and produces its successor.</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> next n = n + <span class="dv">1</span>;;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>next <span class="dv">10</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a># <span class="kw">val</span> next : <span class="dt">int</span> -&gt; <span class="dt">int</span> = &lt;<span class="kw">fun</span>&gt;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a># </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>- : <span class="dt">int</span> = <span class="dv">11</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote><p><div class="SIntrapara">Here is another function Factorial:
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">rec</span> fact n =</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">if</span> n = <span class="dv">0</span> <span class="kw">then</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>     <span class="dv">1</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">else</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>     n * fact (n<span class="dv">-1</span>);;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>fact <span class="dv">5</span>;;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>#         <span class="kw">val</span> fact : <span class="dt">int</span> -&gt; <span class="dt">int</span> = &lt;<span class="kw">fun</span>&gt;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>#   </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>- : <span class="dt">int</span> = <span class="dv">120</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div><div class="SIntrapara"><span style="font-weight: bold">rec</span> keyword is used to define <span style="font-weight: bold">recursive</span> functions. <span style="font-weight: bold">;;</span> ends an expression in the top-level of OCaml. We use it to say:  &#8220;Give me the value of this expression&#8221;. It is not used in the body of a function and it is not needed in the real OCaml development.</div></p><h4 class="heading">1.14<tt>&nbsp;</tt><a name="(part._.Calling_.Functions__.Function_.Application_)"></a>Calling Functions (Function Application)<span class="button-group"><a href="#(part._.Calling_.Functions__.Function_.Application_)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p>Syntax
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>f e1 e2 â€¦ en</span></code></pre></div>

Parentheses are not required around argument(s). There are no commas between the arguments. Instead, we use spaces.</p><p><div class="SIntrapara">Evaluation
</div><div class="SIntrapara"><ul><li><p>Find the definition of f i.e., &lsquo;let rec f x1 &#8230; xn = e&lsquo;</p></li><li><p>Evaluate arguments &lsquo;e1 &#8230; en&lsquo; to values &lsquo;v1 &#8230; vn&lsquo;</p></li><li><p>Substitute arguments &lsquo;v1, &#8230; vn&lsquo; for params &lsquo;x1, ... xn&lsquo; in body e. Call the resulting expression &lsquo;e&#8217;&lsquo;</p></li><li><p>Evaluate &lsquo;e&#8217;&lsquo; to value v, which is the final result</p></li></ul></div></p><p><div class="SIntrapara">Follwoing is an example of evaluating <span style="font-weight: bold">fact 2</span>
</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="emph">OCaml REPL</span></span></p><blockquote class="Rfilecontent"><p><div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">rec</span> fact n =</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> n = <span class="dv">0</span> <span class="kw">then</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>       <span class="dv">1</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>       n * fact (n<span class="dv">-1</span>);;</span></code></pre></div>
<div class="sourceCode" id="cb1"><pre
class="sourceCode ocaml"><code class="sourceCode ocaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>#         </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> fact : <span class="dt">int</span> -&gt; <span class="dt">int</span> = &lt;<span class="kw">fun</span>&gt;</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</p></blockquote></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span style="font-weight: bold">expression</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-weight: bold">semantics</span></p></td></tr><tr><td><p><span class="emph">fact 2</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>substitute every occurence of n inside the body of fact with 2 </p></td></tr><tr><td><p><span class="emph">if 2=0 then 1 else 2*fact(2-1)</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>evaluate the if expression</p></td></tr><tr><td><p><span class="emph">2 * fact 1</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>result of the else branch</p></td></tr><tr><td><p><span class="emph">2 * (if 1=0 then 1 else 1*fact(1-1))</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>substitute n with 1</p></td></tr><tr><td><p><span class="emph">2 * 1 * fact 0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>evaluate fact 0</p></td></tr><tr><td><p><span class="emph">2 * 1 * (if 0=0 then 1 else 0*fact(0-1))</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>base case</p></td></tr><tr><td><p><span class="emph">2 * 1 * 1</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="emph">2</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr></table></div></p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;CMSC 330 Lecture Notes&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;CMSC 330 Lecture Notes&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Regular_Expressions.html" title="forward to &quot;2 Regular Expressions&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>